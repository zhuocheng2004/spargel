module;

export module spargel.base.test;

import spargel.base.container;

export
namespace spargel::base {

class test_base {
public:
    virtual void test_body() = 0;
};

struct test_handle {};

test_handle make_and_register_test(char const* suite_name,
                                   char const* test_name, test_base* test);

struct test_item {
    char const* suite_name;
    char const* test_name;
    test_base* test;
};

class test_manager {
public:
    static test_manager& instance();

    void register_test(char const* suite_name, char const* test_name,
                       test_base* test);

    int run();

private:
    vector<test_item> _tests;
};

}
